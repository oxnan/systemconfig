#Main-CTF config
autoinstall:
  version: 1
  locale: en_US
  keyboard:
    layout: us
  apt:
  sources:
    brave:
      source: "deb [signed-by=/usr/share/keyrings/brave-browser-archive-keyring.gpg arch=amd64] https://brave-browser-apt-release.s3.brave.com/ stable main"
  storage:
    layout:
      name: lvm
  identity:
    realname: "User"
    hostname: machine
    username: user
    password: '$y$j9T$dfB3gvSzWbywFLuEY15TV0$VBoOaUE.lle02VOJlI220NRprHMTQQEx2BhS2I5Wc31'
  packages:
    - ripgrep
    - zsh
    - git
    - curl
    - kitty
    - conky
    - vim
    - wget
    - rsync
    - python3-pip
    - openvpn
    - python3-olefile
    - python3-virtualenv
    - neofetch
    - rofi
    - copyq
    - xbacklight
    - maim
    - picom
    - p7zip-full
    - flameshot
    - remmina
    - wireguard-tools
    - nmap
    - tshark
    - qrencode
    - dirb
    - ffuf
    - arandr
    - binwalk
    - feh
    - bspwm
    - sxhkd
    - btop
    - xdotool
    - polybar
    - curl
    - gnupg
    - python3-dev
    - libssl-dev
    - libffi-dev
    - build-essential
    - eza
  late-commands:
    - curtin in-target --target=/target -- bash -c 'export RUNZSH=no; export CHSH=no; su - user -c "sh -c \"\$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\""'
    - curtin in-target --target=/target -- curl -L git.io/antigen > /home/user/antigen.zsh
    - curtin in-target --target=/target -- chsh -s /usr/bin/zsh user
    - curtin in-target --target=/target -- apt update
    - curtin in-target --target=/target -- apt install -y git make
    - curtin in-target --target=/target -- bash -c "cd /tmp && git clone https://github.com/noctuid/tdrop.git"
    - curtin in-target --target=/target -- bash -c "cd /tmp/tdrop && make install"
    - curtin in-target --target=/target -- apt update
    - curtin in-target --target=/target -- apt install -y git
    - curtin in-target --target=/target -- bash -c "git clone --depth 1 https://github.com/junegunn/fzf.git /opt/fzf"
    - curtin in-target --target=/target -- bash -c "/opt/fzf/install --all"
    - curtin in-target --target=/target -- bash -c 'curl -fsSL https://brave.com/signing-key.asc | gpg --dearmor -o /usr/share/keyrings/brave-browser-archive-keyring.gpg'
    - curtin in-target --target=/target -- apt update
    - curtin in-target --target=/target -- apt install -y brave-browser
    - curtin in-target --target=/target -- python3 -m pip install --upgrade pip
    - curtin in-target --target=/target -- python3 -m pip install --upgrade pwntools
    - curtin in-target --target=/target -- bash -c 'su - user -c "curl -fsSL http://autoinstall.6l.dk/dotfiles -o /tmp/dotfiles.zip && unzip -o /tmp/dotfiles.zip -d ~/"'
    - curtin in-target --target=/target -- bash -c 'echo "user ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers'